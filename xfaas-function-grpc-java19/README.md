# gFaaS Function

#### Requirements

You need to have [Docker](https://www.docker.com), otherwise the CLI will not work properly.

## About

This project allows you to:
- Define a service in .proto notation
- Generate server and client code using the protocol buffer compiler
- Use Java grpc API to write server and client for your service
- Build and deploy your service to Knative using the gFaaS Cli

#### Code

- Proto file in ```proto/function.proto```
- Service implementation in ```org/function/service/FunctionEndpoint.java```
- Server implementation in ```org/function/server/GrpcServer.java```
- Client implementation in ```org/function/client/GrpcClient.java```

#### Development

- Start the main function of the Server and Client implementation
- ```./gradlew build``` will translate the ```proto/function.proto``` to Java code located in ```build/generated/source/proto/main```, which is marked as source for autogenerated java code in ````build.gradle````.
- Then, the service can be implemented like in ```org/function/service/FunctionEndpoint.java```.

#### [grpcurl](https://github.com/fullstorydev/grpcurl)


```
grpcurl -plaintext 127.0.0.1:8080 org.proto.Function/invoke
```


## Workflow

##### Build the Function locally and push it to the local docker repository

```
gfaas build function.yaml
```

##### Push the Function to the configured remote repository which can be reached by the FaaS Platform

```
gfaas push function.yaml
```

##### Deploy the Function to the given FaaS Platform

```
gfaas deploy function.yaml target_faas_platform
```

## Build and Run the Function in a Container
```
docker build . -t gfaas-function-grpc-java19
```
```
docker run -p 8080:8080 gfaas-function-grpc-java19
```

